<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Werewolf 5e</title>
    <link rel="stylesheet" href="src/styles/styles.css">
</head>
<body>
    <header class="sticky-header">
        <nav>
            <a href="index.html" class="nav-home" aria-label="Home">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
            </a>
            <a href="account.html">Account</a>
            <a href="characters.html">Characters</a>
            <a href="sessions.html">Sessions</a>
            <a href="about.html">About Us</a>
        </nav>
        <a href="index.html" class="header-logo-link">
            <img src="https://github.com/user-attachments/assets/aaa6e10d-a24c-4711-8da7-2683d2028d7b" alt="RNBW Logo" class="header-logo">
        </a>
    </header>
    
    <!-- Background Slideshow (full-page) -->
    <div class="background-slideshow">
        <!-- Background slides -->
        <div class="slide active">
            <img src="BlacksmithBG.webp" alt="Blacksmith Background">
        </div>
        <div class="slide">
            <img src="WaterfallBG.webp" alt="Waterfall Background">
        </div>
        <div class="slide">
            <img src="NightfieldBG.webp" alt="Night Field Background">
        </div>
        <div class="slide">
            <img src="SunsetBG.webp" alt="Sunset Background">
        </div>
        <div class="slide">
            <img src="LavaCaveBG.webp" alt="Lava Cave Background">
        </div>
        <div class="slide">
            <img src="CrystalCaveBG.webp" alt="Crystal Cave Background">
        </div>
        <div class="slide">
            <img src="IceLakeBG.webp" alt="Ice Lake Background">
        </div>
        <div class="slide">
            <img src="AuroraSnowBG.webp" alt="Aurora Snow Background">
        </div>
        <div class="slide">
            <img src="RustCityBG.webp" alt="Rust City Background">
        </div>
        
        <!-- Logo overlay (centered, stays on top) -->
        <div class="logo-overlay">
            <img src="RollsLogoWebsiteHeader.webp" alt="Rolls Logo Website Header" class="slideshow-logo">
        </div>
        
        <!-- Navigation arrows -->
        <button class="slide-nav prev" aria-label="Previous slide">&lt;</button>
        <button class="slide-nav next" aria-label="Next slide">&gt;</button>
    </div>
    
    <main>
        
        <section class="ttrpg-buttons">
            <button type="button" class="ttrpg-button" id="werewolf-apocalypse-btn">
                <img src="https://github.com/user-attachments/assets/84010a83-d685-4cfa-bbfd-14029a78007d" alt="Werewolf The Apocalypse">
                <span>Werewolf The Apocalypse</span>
            </button>
            <a href="dnd5e.html" class="ttrpg-button">
                <img src="https://github.com/user-attachments/assets/48bcb77b-7b3e-4b20-b031-d73386bb9b49" alt="Dungeons &amp; Dragons 5e">
                <span>Dungeons &amp; Dragons 5e</span>
            </a>
            <a href="vampire-masquerade.html" class="ttrpg-button">
                <img src="https://github.com/user-attachments/assets/873a8058-9800-4a88-b9e1-aa63ed60018c" alt="Vampire: The Masquerade">
                <span>Vampire: The Masquerade</span>
            </a>
            <a href="call-of-cthulhu.html" class="ttrpg-button">
                <img src="https://github.com/user-attachments/assets/81845192-3ea0-498b-9bcd-3d9cfc6f2b4b" alt="Call of Cthulhu">
                <span>Call of Cthulhu</span>
            </a>
        </section>
    </main>

    <!-- Werewolf Apocalypse Modal -->
    <div id="werewolf-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>Werewolf The Apocalypse</h2>
            <div class="modal-buttons">
                <a href="join-game.html" class="modal-btn">Join Game</a>
                <button type="button" class="modal-btn" id="create-character-btn" style="border: none; cursor: pointer;">Create Character</button>
            </div>
            <button type="button" class="modal-close" id="modal-close-btn">&times;</button>
        </div>
    </div>

    <!-- Burn Transition Overlay -->
    <div id="burn-transition" class="burn-transition-overlay">
        <video id="burn-video" muted playsinline>
            <source src="Burn transition.mov" type="video/mp4">
        </video>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const werewolfBtn = document.getElementById('werewolf-apocalypse-btn');
            const modal = document.getElementById('werewolf-modal');
            const closeBtn = document.getElementById('modal-close-btn');
            const createCharacterBtn = document.getElementById('create-character-btn');
            const burnTransition = document.getElementById('burn-transition');
            const burnVideo = document.getElementById('burn-video');

            werewolfBtn.addEventListener('click', function() {
                modal.classList.add('active');
            });

            closeBtn.addEventListener('click', function() {
                modal.classList.remove('active');
            });

            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.classList.remove('active');
                }
            });

            // Handle Create Character button with burn transition
            createCharacterBtn.addEventListener('click', function() {
                // Show the burn transition overlay
                burnTransition.classList.add('active');
                burnVideo.currentTime = 0;
                burnVideo.play();

                // Navigate to create-character page when video ends or after timeout
                burnVideo.addEventListener('ended', function() {
                    window.location.href = 'create-character.html';
                }, { once: true });

                // Fallback timeout in case video doesn't play
                setTimeout(function() {
                    window.location.href = 'create-character.html';
                }, 3000);
            });

            // Slideshow functionality
            const slides = document.querySelectorAll('.slide');
            const prevBtn = document.querySelector('.slide-nav.prev');
            const nextBtn = document.querySelector('.slide-nav.next');
            
            // Only initialize slideshow if slides exist
            if (slides.length > 0) {
                let currentSlide = 0;
                let slideInterval;

                function showSlide(n) {
                    // Remove active class from all slides
                    slides.forEach(slide => slide.classList.remove('active'));
                    
                    // Handle wrap around
                    if (n >= slides.length) {
                        currentSlide = 0;
                    } else if (n < 0) {
                        currentSlide = slides.length - 1;
                    } else {
                        currentSlide = n;
                    }
                    
                    // Add active class to current slide
                    slides[currentSlide].classList.add('active');
                }

                function nextSlide() {
                    showSlide(currentSlide + 1);
                }

                function prevSlide() {
                    showSlide(currentSlide - 1);
                }

                function startSlideshow() {
                    // Auto-advance every 10 seconds
                    slideInterval = setInterval(nextSlide, 10000);
                }

                function resetSlideshow() {
                    if (slideInterval) {
                        clearInterval(slideInterval);
                    }
                    startSlideshow();
                }

                // Navigation button event listeners
                if (nextBtn) {
                    nextBtn.addEventListener('click', function() {
                        nextSlide();
                        resetSlideshow(); // Reset timer when manually navigating
                    });
                }

                if (prevBtn) {
                    prevBtn.addEventListener('click', function() {
                        prevSlide();
                        resetSlideshow(); // Reset timer when manually navigating
                    });
                }

                // Initialize first slide and start the slideshow
                showSlide(0);
                startSlideshow();
            }
        });
    </script>
</body>
</html>